2020-05-27
트랜잭션 관리

데이터베이스 에서 트랜잭션은 데이터 처리의 한 단위이다.
(phonebook의 경우 베이식 인포와 회사 친구  , 베이식 인포와 학교 친구)
오라클에서 발생하는 여러 개의 SQL 명려문들을 하나의 논리적인 작업 단위로 처리하는데 이를 트랜잭션이라고 한다.
하나의 트랜잭션은 ALL-OR-NOTHING 방식으로 처리된다.
(하나라도 잘못되면 전체를 모두 취소)
여러 개의 명령어의 집합이 정상적으로 처리되면 정상 종료하도록 하고
어려 개의 명령어 중에서 하나의 명령어라도 잘못되었다면 전체를 취소한다.
데이터베이스에서 작업의 단위로 트랜잭션이란 개념을 도입한 이유는 데이터의 일관성을 유지하면서
안정적으로 데이터를 복구시키기 위해서 이다.

트랜젝션 제어를 위한 명령어에는
1. COMMIT
정상 처리 :논리적 적용에서  물리적 적용으로 완전 저장.
2. ROLLBACK
실패 : 마지막 COMMIT 위치로 롤백

DML은 명령어들이 실행됨과 동시에 트랜잭션이 진행된다.
이들 DML 작업이 성공적으로 처리되도록 하기 위해서는 COMMIT 명령을, 작업을 취소하기 위해서는
ROLLBAK 명령으로 종료해야 한다.
COMMT은 모든 작업들을 정상적으로 처리하겠다고 확정하는 명령어. 모두 영구 저장 된다.
ROLLBACK은  작업 중 문제가 발생되어서 트랜잭션의 처리 과정에서 발생한 변경사항을 취소하는 명령어.
트랜잭션으로 인한 하나의 묶음 처리가 시작되기 이전의 상태도 되돌린다.

COMMIT 명령어
Transaction (insert, update, delete) 작업 내용을 실제 DB에 저장한다.
이전 데이터가 완전히 update 된다.
모든 사용자가 변경된 데이터의 결과를 볼 수 있다.
ROLLBACK 명령어
Transaction(insert, update, delete) 작업 내용을 취소 함.
이전 COMMIT한 곳 까지만 복구한다.

자동 COMMIT ,ROLLBACK 명령이 되는 경우
DDL(create, alter, rename, truncate), DCL 명령문이 수행된 경우 자동으로 commit 됨.
(그래서 원래는 DDL과 DML을 분리 되어야 한다.)
정전이 발생했거나 컴퓨터 Down시(비정상적 종료) 자동으로 ROLLBACK 된다.
